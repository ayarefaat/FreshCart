import{a as L}from"./chunk-NVT2GBP7.js";import{a as j}from"./chunk-MRBI3TW2.js";import{a as T,b as f,c as I,d as N,h as k,i as D,j as q,k as M,m as U}from"./chunk-VZPYMUVG.js";import"./chunk-UXZZGWPP.js";import{ca as y}from"./chunk-WXBF3XXG.js";import{Y as E}from"./chunk-V5QCGGX7.js";import{Cb as l,Db as n,Eb as C,Ob as F,Pb as _,Tb as r,Ub as w,Wa as a,Xa as g,_b as S,bc as b,ga as x,ob as u,ub as c,yb as p}from"./chunk-7Q3RJGOY.js";var A=(e,d)=>({"is-valid":e,"is-invalid":d});function G(e,d){if(e&1&&(l(0,"p",2),r(1),n()),e&2){let i=_();a(),w(i.resText)}}function P(e,d){if(e&1&&(l(0,"p",14),r(1),n()),e&2){let i=_();a(),w(i.resText)}}function B(e,d){e&1&&(l(0,"p",15),r(1,"Email is required"),n())}function O(e,d){e&1&&(l(0,"p",15),r(1,"Email format not correct"),n())}function R(e,d){if(e&1&&(l(0,"div",8),u(1,B,2,0,"p",15)(2,O,2,0),n()),e&2){let i,s=_();a(),p(1,(i=s.loginForm.get("email"))!=null&&i.getError("required")?1:(i=s.loginForm.get("email"))!=null&&i.getError("email")?2:-1)}}function V(e,d){e&1&&(l(0,"p",15),r(1,"password is required"),n())}function z(e,d){e&1&&(l(0,"p",15),r(1,"password length must be at least 6"),n())}function $(e,d){if(e&1&&(l(0,"div",8),u(1,V,2,0,"p",15)(2,z,2,0),n()),e&2){let i,s=_();a(),p(1,(i=s.loginForm.get("password"))!=null&&i.getError("required")?1:(i=s.loginForm.get("password"))!=null&&i.getError("pattern")?2:-1)}}function H(e,d){e&1&&(l(0,"span"),C(1,"i",16),n())}var ee=(()=>{class e{constructor(i,s,t,o){this._formBuilder=i,this._authService=s,this._router=t,this._sharedService=o,this.isLoading=!1,this.loginForm=this._formBuilder.group({email:[null,[f.required,f.email]],password:[null,[f.required,f.pattern(/^\w{6,}$/)]]})}loginUser(){this.loginForm.valid?(console.log(this.loginForm),this.isLoading=!0,this.loginSub=this._authService.loginUser(this.loginForm.value).subscribe({next:i=>{console.log(i),this.resText=i.message,this.isLoading=!1,this._sharedService.login(i.token),this._sharedService.saveDecodedUser(),this._sharedService.saveUserData(i.user),this.intervalId=setInterval(()=>{this._router.navigate(["/home"])},2e3)}})):this.loginForm.markAllAsTouched()}forget(){this._router.navigate(["/forget-password"])}ngOnDestroy(){clearInterval(this.intervalId),this.loginSub?.unsubscribe()}static{this.\u0275fac=function(s){return new(s||e)(g(M),g(j),g(y),g(L))}}static{this.\u0275cmp=x({type:e,selectors:[["app-login"]],standalone:!0,features:[S],decls:26,vars:14,consts:[[1,"bg-main-light","p-3","my-5","rounded-2","mx-auto","w-75","shadow"],[1,"text-main","fs-1","fw-bold"],[1,"mb-0","mt-3","alert","alert-danger","fw-bold","mx-auto"],[1,"py-3",3,"ngSubmit","formGroup"],[1,"my-3"],["for","email",1,"mb-2","fw-bolder"],[1,"text-danger"],["id","email","type","text","formControlName","email","placeholder","Ex:email@gmail.com",1,"form-control",3,"ngClass"],[1,"alert","alert-warning","fs-6","my-3","rounded-2","fw-bold"],["for","password",1,"mb-2","fw-bolder"],["id","password","type","password","formControlName","password",1,"form-control",3,"ngClass"],[1,"d-flex","flex-column"],["type","submit",1,"btn","btn-main","col-12","col-md-4","text-white","mb-3",3,"disabled"],[1,"forget","fw-bolder","cursor-pointer",3,"click"],[1,"mb-0","mt-3","alert","alert-success","text-success","fw-bold","mx-auto"],[1,"m-0"],[1,"fa-solid","fa-circle-notch","fa-spin"]],template:function(s,t){if(s&1&&(l(0,"section",0)(1,"h1",1),r(2,"Login Now:"),n(),u(3,G,2,1,"p",2)(4,P,2,1),l(5,"form",3),F("ngSubmit",function(){return t.loginUser()}),l(6,"div",4)(7,"label",5)(8,"span",6),r(9,"*"),n(),r(10,"Email: "),n(),C(11,"input",7),u(12,R,3,1,"div",8),n(),l(13,"div",4)(14,"label",9)(15,"span",6),r(16,"*"),n(),r(17,"Password: "),n(),C(18,"input",10),u(19,$,3,1,"div",8),n(),l(20,"div",11)(21,"button",12),r(22,"Login "),u(23,H,2,0,"span"),n(),l(24,"span",13),F("click",function(){return t.forget()}),r(25,"Forget Password?"),n()()()()),s&2){let o,v,m,h;a(3),p(3,t.resText&&t.resText!=="success"?3:t.resText&&t.resText=="success"?4:-1),a(2),c("formGroup",t.loginForm),a(6),c("ngClass",b(8,A,!((o=t.loginForm.get("email"))!=null&&o.errors)&&(((o=t.loginForm.get("email"))==null?null:o.touched)||((o=t.loginForm.get("email"))==null?null:o.dirty)),((o=t.loginForm.get("email"))==null?null:o.errors)&&(((o=t.loginForm.get("email"))==null?null:o.touched)||((o=t.loginForm.get("email"))==null?null:o.dirty)))),a(),p(12,(v=t.loginForm.get("email"))!=null&&v.errors&&((v=t.loginForm.get("email"))!=null&&v.touched)?12:-1),a(6),c("ngClass",b(11,A,!((m=t.loginForm.get("password"))!=null&&m.errors)&&(((m=t.loginForm.get("password"))==null?null:m.touched)||((m=t.loginForm.get("password"))==null?null:m.dirty)),((m=t.loginForm.get("password"))==null?null:m.errors)&&(((m=t.loginForm.get("password"))==null?null:m.touched)||((m=t.loginForm.get("password"))==null?null:m.dirty)))),a(),p(19,(h=t.loginForm.get("password"))!=null&&h.errors&&((h=t.loginForm.get("password"))!=null&&h.touched)?19:-1),a(2),c("disabled",t.loginForm.invalid),a(2),p(23,t.isLoading?23:-1)}},dependencies:[U,k,T,I,N,D,q,E],styles:["span.forget[_ngcontent-%COMP%]{transition:color ease .4s;-webkit-transition:color ease .4s;-moz-transition:color ease .4s;-ms-transition:color ease .4s;-o-transition:color ease .4s}span.forget[_ngcontent-%COMP%]:hover{color:#dc354a}"]})}}return e})();export{ee as LoginComponent};
