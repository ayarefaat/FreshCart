import{a as R}from"./chunk-MOZQVFUY.js";import"./chunk-NVT2GBP7.js";import{a as F,b as g,c as I,d as N,h as D,i as V,j,k as M,m as P}from"./chunk-VZPYMUVG.js";import"./chunk-UXZZGWPP.js";import{H as w,V as q}from"./chunk-OSSHIEUV.js";import"./chunk-CNXF2SFB.js";import{Y as T}from"./chunk-V5QCGGX7.js";import{Cb as o,Db as n,Eb as y,Ob as E,Pb as A,Tb as d,Wa as r,Xa as _,_b as x,bc as b,ga as S,ob as m,ub as c,yb as h}from"./chunk-7Q3RJGOY.js";var k=(t,u)=>({"is-valid":t,"is-invalid":u});function G(t,u){t&1&&(o(0,"p",15),d(1,"details is required"),n())}function B(t,u){t&1&&(o(0,"p",15),d(1,"Details length must be at least 20 "),n())}function O(t,u){if(t&1&&(o(0,"div",7),m(1,G,2,0,"p",15)(2,B,2,0),n()),t&2){let i,s=A();r(),h(1,(i=s.shippingAddress.get("details"))!=null&&i.getError("required")?1:(i=s.shippingAddress.get("details"))!=null&&i.getError("minlength")?2:-1)}}function L(t,u){t&1&&(o(0,"p",15),d(1,"phone is required"),n())}function H(t,u){t&1&&(o(0,"p",15),d(1,"phone number is not valid"),n())}function $(t,u){if(t&1&&(o(0,"div",7),m(1,L,2,0,"p",15)(2,H,2,0),n()),t&2){let i,s=A();r(),h(1,(i=s.shippingAddress.get("phone"))!=null&&i.getError("required")?1:(i=s.shippingAddress.get("phone"))!=null&&i.getError("pattern")?2:-1)}}function z(t,u){t&1&&(o(0,"p",15),d(1,"city is required"),n())}function J(t,u){t&1&&(o(0,"p",15),d(1,"Details length must be at least 3 "),n())}function K(t,u){if(t&1&&(o(0,"div",7),m(1,z,2,0,"p",15)(2,J,2,0),n()),t&2){let i,s=A();r(),h(1,(i=s.shippingAddress.get("city"))!=null&&i.getError("required")?1:(i=s.shippingAddress.get("city"))!=null&&i.getError("minlength")?2:-1)}}var ee=(()=>{class t{constructor(i,s,e,l){this._formBuilder=i,this._activatedRoute=s,this._paymentService=e,this._router=l,this.shippingAddress=this._formBuilder.group({details:[null,[g.required,g.minLength(20)]],phone:[null,[g.required,g.pattern(/^01[0125][0-9]{8}$/)]],city:[null,[g.required,g.minLength(3)]]})}ngOnInit(){this._activatedRoute.paramMap.subscribe({next:i=>{this.cartId=i.get("id"),console.log(this.cartId)}})}payVisa(){this._paymentService.checkOutSession(this.cartId,this.shippingAddress.value).subscribe({next:i=>{console.log(i),window.open(i.session.url,"_self")}}),console.log(this.shippingAddress.value)}payCash(){this._paymentService.cashPayment(this.cartId,this.shippingAddress.value).subscribe({next:i=>{console.log(i),this._router.navigate(["/allorders"])}})}static{this.\u0275fac=function(s){return new(s||t)(_(M),_(w),_(R),_(q))}}static{this.\u0275cmp=S({type:t,selectors:[["app-checkout"]],standalone:!0,features:[x],decls:25,vars:18,consts:[[1,"checkout","m-5","bg-light","rounded-2","p-3"],[1,"container"],[1,"text-main","fw-bolder","my-2"],[3,"formGroup"],[1,"my-3"],["for","details"],["name","","formControlName","details","id","details","placeholder","Cairo , Maadi",1,"form-control",3,"ngClass"],[1,"alert","alert-warning","fs-6","my-3","rounded-2","fw-bold"],["for","phone"],["id","phone","type","tel","formControlName","phone","placeholder","01xxxxxxxxx",1,"form-control",3,"ngClass"],["for","city"],["type","text","name","","formControlName","city","id","city","placeholder","Helwan",1,"form-control",3,"ngClass"],[1,"btns","d-flex","flex-wrap","justify-content-center","align-items-center"],[1,"btn","btn-outline-success","fw-bolder","px-4","col-12","col-md-4","me-1",3,"click","disabled"],[1,"btn","btn-outline-success","fw-bolder","px-4","col-12","col-md-4","mt-2","mt-md-0","ms-1",3,"click","disabled"],[1,"m-0"]],template:function(s,e){if(s&1&&(o(0,"section",0)(1,"div",1)(2,"h2",2),d(3,"CheckOut"),n(),o(4,"form",3)(5,"div",4)(6,"label",5),d(7,"Details"),n(),y(8,"textarea",6),m(9,O,3,1,"div",7),n(),o(10,"div",4)(11,"label",8),d(12,"Phone"),n(),y(13,"input",9),m(14,$,3,1,"div",7),n(),o(15,"div",4)(16,"label",10),d(17,"City"),n(),y(18,"input",11),m(19,K,3,1,"div",7),n(),o(20,"div",12)(21,"button",13),E("click",function(){return e.payVisa()}),d(22,"Pay Visa"),n(),o(23,"button",14),E("click",function(){return e.payCash()}),d(24,"Pay Cash"),n()()()()()),s&2){let l,C,a,f,p,v;r(4),c("formGroup",e.shippingAddress),r(4),c("ngClass",b(9,k,!((l=e.shippingAddress.get("details"))!=null&&l.errors)&&(((l=e.shippingAddress.get("details"))==null?null:l.touched)||((l=e.shippingAddress.get("details"))==null?null:l.dirty)),((l=e.shippingAddress.get("details"))==null?null:l.errors)&&(((l=e.shippingAddress.get("details"))==null?null:l.touched)||((l=e.shippingAddress.get("details"))==null?null:l.dirty)))),r(),h(9,(C=e.shippingAddress.get("details"))!=null&&C.errors&&((C=e.shippingAddress.get("details"))!=null&&C.touched)?9:-1),r(4),c("ngClass",b(12,k,!((a=e.shippingAddress.get("phone"))!=null&&a.errors)&&(((a=e.shippingAddress.get("phone"))==null?null:a.touched)||((a=e.shippingAddress.get("phone"))==null?null:a.dirty)),((a=e.shippingAddress.get("phone"))==null?null:a.errors)&&(((a=e.shippingAddress.get("phone"))==null?null:a.touched)||((a=e.shippingAddress.get("phone"))==null?null:a.dirty)))),r(),h(14,(f=e.shippingAddress.get("phone"))!=null&&f.errors&&((f=e.shippingAddress.get("phone"))!=null&&f.touched)?14:-1),r(4),c("ngClass",b(15,k,!((p=e.shippingAddress.get("city"))!=null&&p.errors)&&(((p=e.shippingAddress.get("city"))==null?null:p.touched)||((p=e.shippingAddress.get("city"))==null?null:p.dirty)),((p=e.shippingAddress.get("city"))==null?null:p.errors)&&(((p=e.shippingAddress.get("city"))==null?null:p.touched)||((p=e.shippingAddress.get("city"))==null?null:p.dirty)))),r(),h(19,(v=e.shippingAddress.get("city"))!=null&&v.errors&&((v=e.shippingAddress.get("city"))!=null&&v.touched)?19:-1),r(2),c("disabled",e.shippingAddress.invalid),r(2),c("disabled",e.shippingAddress.invalid)}},dependencies:[P,D,F,I,N,V,j,T]})}}return t})();export{ee as CheckoutComponent};
