import{l as U}from"./chunk-WNAWHQLM.js";import{a as L}from"./chunk-NVT2GBP7.js";import{a as M}from"./chunk-MRBI3TW2.js";import{a as x,b as _,c as T,d as I,h as N,i as D,j as k,k as q,m as j}from"./chunk-VZPYMUVG.js";import"./chunk-UXZZGWPP.js";import{ca as y}from"./chunk-WXBF3XXG.js";import{Y as E}from"./chunk-V5QCGGX7.js";import{Cb as l,Db as n,Eb as v,Ob as C,Pb as F,Tb as s,Wa as m,Xa as g,_b as b,bc as w,ga as S,ob as p,ub as f,yb as c}from"./chunk-7Q3RJGOY.js";var A=(i,d)=>({"is-valid":i,"is-invalid":d});function B(i,d){i&1&&(l(0,"p",13),s(1,"Email is required"),n())}function G(i,d){i&1&&(l(0,"p",13),s(1,"Email format not correct"),n())}function O(i,d){if(i&1&&(l(0,"div",7),p(1,B,2,0,"p",13)(2,G,2,0),n()),i&2){let t,r=F();m(),c(1,(t=r.loginForm.get("email"))!=null&&t.getError("required")?1:(t=r.loginForm.get("email"))!=null&&t.getError("email")?2:-1)}}function P(i,d){i&1&&(l(0,"p",13),s(1,"password is required"),n())}function V(i,d){i&1&&(l(0,"p",13),s(1,"password length must be at least 6"),n())}function R(i,d){if(i&1&&(l(0,"div",7),p(1,P,2,0,"p",13)(2,V,2,0),n()),i&2){let t,r=F();m(),c(1,(t=r.loginForm.get("password"))!=null&&t.getError("required")?1:(t=r.loginForm.get("password"))!=null&&t.getError("pattern")?2:-1)}}function z(i,d){i&1&&(l(0,"span"),v(1,"i",14),n())}var Z=(()=>{class i{constructor(t,r,e,o,u){this._formBuilder=t,this._authService=r,this._router=e,this._sharedService=o,this._toaster=u,this.isLoading=!1,this.loginForm=this._formBuilder.group({email:[null,[_.required,_.email]],password:[null,[_.required,_.pattern(/^\w{6,}$/)]]})}loginUser(){this.loginForm.valid?(console.log(this.loginForm),this.isLoading=!0,this.loginSub=this._authService.loginUser(this.loginForm.value).subscribe({next:t=>{console.log(t),this._toaster.success("Logged in successfully","FreshCart",{closeButton:!0,timeOut:1e3}),this.isLoading=!1,this._sharedService.login(t.token),this._sharedService.saveDecodedUser(),this._sharedService.saveUserData(t.user),this.intervalId=setInterval(()=>{this._router.navigate(["/home"])},2e3)}})):this.loginForm.markAllAsTouched()}forget(){this._router.navigate(["/forget-password"])}ngOnDestroy(){clearInterval(this.intervalId),this.loginSub?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||i)(g(q),g(M),g(y),g(L),g(U))}}static{this.\u0275cmp=S({type:i,selectors:[["app-login"]],standalone:!0,features:[b],decls:24,vars:13,consts:[[1,"bg-main-light","p-3","my-5","rounded-2","mx-auto","w-75","shadow"],[1,"text-main","fs-1","fw-bold"],[1,"py-3",3,"ngSubmit","formGroup"],[1,"my-3"],["for","email",1,"mb-2","fw-bolder"],[1,"text-danger"],["id","email","type","text","formControlName","email","placeholder","Ex:email@gmail.com",1,"form-control",3,"ngClass"],[1,"alert","alert-warning","fs-6","my-3","rounded-2","fw-bold"],["for","password",1,"mb-2","fw-bolder"],["id","password","type","password","formControlName","password",1,"form-control",3,"ngClass"],[1,"d-flex","flex-column"],["type","submit",1,"btn","btn-main","col-12","col-md-4","text-white","mb-3",3,"disabled"],[1,"forget","fw-bolder","cursor-pointer",3,"click"],[1,"m-0"],[1,"fa-solid","fa-circle-notch","fa-spin"]],template:function(r,e){if(r&1&&(l(0,"section",0)(1,"h1",1),s(2,"Login Now:"),n(),l(3,"form",2),C("ngSubmit",function(){return e.loginUser()}),l(4,"div",3)(5,"label",4)(6,"span",5),s(7,"*"),n(),s(8,"Email: "),n(),v(9,"input",6),p(10,O,3,1,"div",7),n(),l(11,"div",3)(12,"label",8)(13,"span",5),s(14,"*"),n(),s(15,"Password: "),n(),v(16,"input",9),p(17,R,3,1,"div",7),n(),l(18,"div",10)(19,"button",11),s(20,"Login "),p(21,z,2,0,"span"),n(),l(22,"span",12),C("click",function(){return e.forget()}),s(23,"Forget Password?"),n()()()()),r&2){let o,u,a,h;m(3),f("formGroup",e.loginForm),m(6),f("ngClass",w(7,A,!((o=e.loginForm.get("email"))!=null&&o.errors)&&(((o=e.loginForm.get("email"))==null?null:o.touched)||((o=e.loginForm.get("email"))==null?null:o.dirty)),((o=e.loginForm.get("email"))==null?null:o.errors)&&(((o=e.loginForm.get("email"))==null?null:o.touched)||((o=e.loginForm.get("email"))==null?null:o.dirty)))),m(),c(10,(u=e.loginForm.get("email"))!=null&&u.errors&&((u=e.loginForm.get("email"))!=null&&u.touched)?10:-1),m(6),f("ngClass",w(10,A,!((a=e.loginForm.get("password"))!=null&&a.errors)&&(((a=e.loginForm.get("password"))==null?null:a.touched)||((a=e.loginForm.get("password"))==null?null:a.dirty)),((a=e.loginForm.get("password"))==null?null:a.errors)&&(((a=e.loginForm.get("password"))==null?null:a.touched)||((a=e.loginForm.get("password"))==null?null:a.dirty)))),m(),c(17,(h=e.loginForm.get("password"))!=null&&h.errors&&((h=e.loginForm.get("password"))!=null&&h.touched)?17:-1),m(2),f("disabled",e.loginForm.invalid),m(2),c(21,e.isLoading?21:-1)}},dependencies:[j,N,x,T,I,D,k,E],styles:["span.forget[_ngcontent-%COMP%]{transition:color ease .4s;-webkit-transition:color ease .4s;-moz-transition:color ease .4s;-ms-transition:color ease .4s;-o-transition:color ease .4s}span.forget[_ngcontent-%COMP%]:hover{color:#dc354a}"]})}}return i})();export{Z as LoginComponent};
