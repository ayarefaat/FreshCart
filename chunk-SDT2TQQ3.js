import{a as G,b as J,c as R}from"./chunk-VOHF2FX7.js";import{a as K}from"./chunk-GPDEUNDG.js";import{a as Q}from"./chunk-DJEQTHQX.js";import{a as q}from"./chunk-4LR65QCZ.js";import{a as V}from"./chunk-2QRL562O.js";import{a as O}from"./chunk-AYSO5EUP.js";import{l as X}from"./chunk-WNAWHQLM.js";import"./chunk-NVT2GBP7.js";import{a as $,c as N,g as z,l as U}from"./chunk-VZPYMUVG.js";import"./chunk-UXZZGWPP.js";import"./chunk-WXBF3XXG.js";import"./chunk-V5QCGGX7.js";import{$b as W,Ab as f,Bb as v,Cb as r,Db as n,Eb as l,Hb as F,Ob as y,Pb as h,Sa as x,Tb as m,Ub as g,Vb as H,Wa as a,Wb as k,Xa as u,Xb as A,Yb as j,_b as M,ac as b,ec as P,ga as L,gc as B,ob as _,qa as C,qb as E,ra as S,rb as I,ub as p,x as T,yb as w,zb as D}from"./chunk-7Q3RJGOY.js";var Z=(e,s)=>s._id,ee=()=>[import("./chunk-INGR2DOU.js").then(e=>e.RouterLink),import("./chunk-MWWSWZBX.js").then(e=>e.SearchPipe),import("./chunk-6IXFFMEM.js").then(e=>e.NgClass)],te=e=>["/product-details/",e],ie=e=>({"text-danger":e}),oe=()=>[1,2,3,4,5];function re(e,s){e&1&&l(0,"img",13)}function ne(e,s){e&1&&l(0,"img",14)}function ae(e,s){e&1&&l(0,"img",15)}function se(e,s){if(e&1&&(l(0,"img",16),r(1,"p",17),m(2),n()),e&2){let t=h().$implicit;p("src",t.image,x)("alt",t.name),a(2),g(t.name)}}function ce(e,s){e&1&&_(0,se,3,3,"ng-template",5)}function le(e,s){e&1&&l(0,"app-loader")}function me(e,s){e&1&&(r(0,"span",31),l(1,"i",33),n())}function de(e,s){e&1&&(r(0,"span",31),l(1,"i",34),n())}function pe(e,s){if(e&1){let t=F();r(0,"div",19)(1,"div",20)(2,"div",21)(3,"div",22),l(4,"img",23),n()(),r(5,"div",24)(6,"h2",25),m(7),n(),r(8,"h1",26),m(9),n(),r(10,"div")(11,"div",27)(12,"span"),m(13),n(),r(14,"span",28),y("click",function(){let i=C(t),d=i.$implicit,c=i.$index,Y=h(2);return S(Y.addToWishList(d._id,c))}),l(15,"i",29),n()(),r(16,"div",30),f(17,me,2,0,"span",31,D),_(19,de,2,0,"span",31),r(20,"span"),m(21),n()()()(),r(22,"button",32),y("click",function(){let i=C(t).$implicit,d=h(2);return S(d.addToCart(i._id))}),m(23,"Add to cart +"),n()()()}if(e&2){let t=s.$implicit;a(2),p("routerLink",b(9,te,t._id)),a(2),p("src",t.imageCover,x)("alt",t.title),a(3),g(t.category.name),a(2),g(t.title.split(" ").splice(0,2).join(" ")),a(4),H("",t.price,"EGP"),a(),p("ngClass",b(11,ie,t.isAdded)),a(3),v(W(13,oe).slice(0,t.ratingsAverage)),a(2),w(19,t.ratingsAverage%1!==0?19:-1),a(2),g(t.ratingsAverage)}}function ue(e,s){if(e&1&&(r(0,"div",18),f(1,pe,24,14,"div",19,D),P(3,"search"),n()),e&2){let t=h();a(),v(B(3,0,t.productData,t.search))}}var Te=(()=>{class e{constructor(t,o,i,d,c){this._productService=t,this._categoriesService=o,this._cartService=i,this._wishListService=d,this._toaster=c,this.search="",this.isProductAdded=!1,this.categoriesSlider={loop:!0,mouseDrag:!0,autoplay:!0,autoplayTimeout:2e3,touchDrag:!0,pullDrag:!1,dots:!1,navSpeed:700,navText:["",""],responsive:{0:{items:1},400:{items:2},740:{items:3},940:{items:4},1100:{items:5}},nav:!0},this.mainSlider={loop:!0,mouseDrag:!0,autoplay:!0,autoplayTimeout:2e3,touchDrag:!0,pullDrag:!1,dots:!1,navSpeed:700,items:1,navText:["",""],nav:!0}}ngOnInit(){T([this._productService.getAllProducts(1),this._wishListService.displayWishList()]).subscribe({next:t=>{this.productData=t[0].data.slice(0,20),this.wishListData=t[1].data,this.productData.forEach(o=>{for(let i=0;i<this.wishListData.length;i++)o._id===this.wishListData[i]._id&&(o.isAdded=!0)}),console.log(this.productData,this.wishListData)}}),this.catSub=this._categoriesService.getAllCategories().subscribe({next:t=>{this.categoryData=t.data,console.log(this.categoryData)},error:t=>{console.log(t)}})}addToWishList(t,o){this._wishListService.addToWishList(t).subscribe({next:i=>{this.wishListItemsIDs=i.data,this._wishListService.wishListCounter.next(i.data.length),console.log(this.wishListItemsIDs),this.wishListItemsIDs.filter(d=>{d===this.productData[o]._id&&(this.productData[o].isAdded=!this.productData[o].isAdded,this.productData[o].isAdded?this._toaster.success(i.message,"FreshCart",{closeButton:!0,timeOut:1e3}):this._wishListService.removeWishList(t).subscribe({next:c=>{console.log(c),this._toaster.warning(c.message,"FreshCart",{closeButton:!0,timeOut:1e3}),this._wishListService.wishListCounter.next(c.data.length)}}))})}})}addToCart(t){this._cartService.addToCart(t).subscribe({next:o=>{console.log(o),this._cartService.cartCounter.next(o.numOfCartItems),this._toaster.success(o.message,"Fresh Cart",{closeButton:!0})}})}ngOnDestroy(){this.productSub?.unsubscribe(),this.catSub?.unsubscribe()}static{this.\u0275fac=function(o){return new(o||e)(u(K),u(Q),u(O),u(V),u(X))}}static{this.\u0275cmp=L({type:e,selectors:[["app-home"]],standalone:!0,features:[M],decls:27,vars:5,consts:[[1,"my-3"],[1,"container"],[1,"row","g-0"],[1,"col-12","col-md-9"],[3,"options"],["carouselSlide",""],[1,"col-12","col-md-3"],["src","./assets/images/grocery-banner.png","height","200","alt","",1,"w-100"],["src","./assets/images/grocery-banner-2.jpeg","height","200","alt","",1,"w-100"],[1,""],[1,"products","my-3"],[1,"w-50","mx-auto","text-center","border-top","border-bottom","border-success","p-2","fw-bold"],["type","text","placeholder","Search by Name",1,"form-control","my-3","w-50","mx-auto","border-success",3,"ngModelChange","ngModel"],["src","./assets/images/slider-image-1.jpeg","height","400","alt","",1,"w-100","d-inline-block","text-center"],["src","./assets/images/slider-image-2.jpeg","height","400","alt","",1,"w-100"],["src","./assets/images/slider-image-3.jpeg","height","400","alt","",1,"w-100"],["height","200",1,"w-100",3,"src","alt"],[1,"fw-bold"],[1,"row"],[1,"col-12","col-sm-6","col-md-3","col-xl-2","p-2"],[1,"product","rounded-2","p-2","cursor-pointer"],[3,"routerLink"],[1,"product-img"],[1,"w-100","rounded-2",3,"src","alt"],[1,"product-caption"],[1,"fs-6","text-main"],[1,"fs-6","fw-bold"],[1,"d-flex","justify-content-between"],[1,"heart","fs-4",3,"click","ngClass"],[1,"fa-solid","fa-heart"],[1,"small"],[1,"rating-color"],[1,"btn-main","w-100",3,"click"],[1,"fa-solid","fa-star"],[1,"fa-solid","fa-star-half-stroke"]],template:function(o,i){o&1&&(r(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"owl-carousel-o",4),_(5,re,1,0,"ng-template",5)(6,ne,1,0,"ng-template",5)(7,ae,1,0,"ng-template",5),n()(),r(8,"div",6),l(9,"img",7)(10,"img",8),n()()()(),r(11,"section",9)(12,"div",1)(13,"h3"),m(14,"Shop popular Categories"),n(),r(15,"owl-carousel-o",4),f(16,ce,1,0,null,5,Z),n()()(),r(18,"section",10)(19,"div",1)(20,"h1",11),m(21," Popular Products "),n(),r(22,"input",12),j("ngModelChange",function(c){return A(i.search,c)||(i.search=c),c}),n(),_(23,le,1,0,"app-loader")(24,ue,4,3),E(25,24,ee),n()()),o&2&&(a(4),p("options",i.mainSlider),a(11),p("options",i.categoriesSlider),a(),v(i.categoryData),a(6),k("ngModel",i.search),a(),w(23,i.productData?-1:23),a(2),I(i.productData))},dependencies:[R,J,G,U,$,N,z,q],styles:[".red[_ngcontent-%COMP%]{color:red}"]})}}return e})();export{Te as HomeComponent};
