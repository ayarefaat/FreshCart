import{l as O}from"./chunk-WNAWHQLM.js";import{a as w}from"./chunk-NVT2GBP7.js";import{a as M}from"./chunk-MRBI3TW2.js";import{a as D,b as s,c as q,d as I,h as j,i as R,j as A,k as B,m as G}from"./chunk-VZPYMUVG.js";import"./chunk-UXZZGWPP.js";import{Q as P,ca as T}from"./chunk-WXBF3XXG.js";import{Y as N}from"./chunk-V5QCGGX7.js";import{Cb as l,Db as i,Eb as F,Ob as y,Pb as E,Tb as a,Wa as d,Xa as c,_b as U,bc as x,ga as b,ob as _,ub as h,yb as f}from"./chunk-7Q3RJGOY.js";var S=(e,p)=>({"is-valid":e,"is-invalid":p});function V(e,p){e&1&&(l(0,"p",14),a(1,"Name is required"),i())}function L(e,p){e&1&&(l(0,"p",14),a(1,"Name length must be at least 3"),i())}function k(e,p){e&1&&(l(0,"p",14),a(1,"Name length must be max 10"),i())}function J(e,p){if(e&1&&(l(0,"div",6),_(1,V,2,0,"p",14)(2,L,2,0)(3,k,2,0),i()),e&2){let n,o=E();d(),f(1,(n=o.updateForm.get("name"))!=null&&n.getError("required")?1:(n=o.updateForm.get("name"))!=null&&n.getError("minlength")?2:(n=o.updateForm.get("name"))!=null&&n.getError("maxlength")?3:-1)}}function Y(e,p){e&1&&(l(0,"p",14),a(1,"Email is required"),i())}function $(e,p){e&1&&(l(0,"p",14),a(1,"Email format not correct"),i())}function z(e,p){if(e&1&&(l(0,"div",6),_(1,Y,2,0,"p",14)(2,$,2,0),i()),e&2){let n,o=E();d(),f(1,(n=o.updateForm.get("email"))!=null&&n.getError("required")?1:(n=o.updateForm.get("email"))!=null&&n.getError("email")?2:-1)}}function H(e,p){e&1&&(l(0,"p",14),a(1,"phone is required"),i())}function K(e,p){e&1&&(l(0,"p",14),a(1,"phone number is not valid"),i())}function Q(e,p){if(e&1&&(l(0,"div",11),_(1,H,2,0,"p",14)(2,K,2,0),i()),e&2){let n,o=E();d(),f(1,(n=o.updateForm.get("phone"))!=null&&n.getError("required")?1:(n=o.updateForm.get("phone"))!=null&&n.getError("pattern")?2:-1)}}var oe=(()=>{class e{constructor(n,o,t,r,g,m){this._activatedRoute=n,this._formBuilder=o,this._authService=t,this._toaster=r,this._sharedService=g,this._router=m}ngOnInit(){this._activatedRoute.paramMap.subscribe({next:n=>{this.userData=JSON.parse(n.get("data")),console.log(this.userData),this.updateUser()}})}updateUser(){this.updateForm=this._formBuilder.group({name:[this.userData.name,[s.required,s.minLength(3),s.maxLength(10)]],email:[this.userData.email,[s.required,s.email]],phone:[this.userData.phone||null,[s.required,s.pattern(/^01[0125][0-9]{8}$/)]]})}update(){console.log(this.updateForm.value),this._authService.updateUser(this.updateForm.value).subscribe({next:n=>{console.log(n),this._toaster.success(n.message,"FreshCart",{closeButton:!0,timeOut:1e3}),this._sharedService.saveUserData(this.updateForm.value),this._router.navigate(["profile"])}})}static{this.\u0275fac=function(o){return new(o||e)(c(P),c(B),c(M),c(O),c(w),c(T))}}static{this.\u0275cmp=b({type:e,selectors:[["app-update-profile"]],standalone:!0,features:[U],decls:27,vars:17,consts:[[1,"bg-main-light","p-3","my-5","rounded-2","mx-auto","w-75","shadow"],[1,"py-3",3,"ngSubmit","formGroup"],[1,"my-3"],["for","name",1,"mb-2","fw-bolder"],[1,"text-danger"],["id","name","type","text","formControlName","name","placeholder","Ex:Aya",1,"form-control",3,"ngClass"],[1,"alert","alert-warning","fs-6","my-3","rounded-2","fw-bold"],["for","email",1,"mb-2","fw-bolder"],["id","email","type","text","formControlName","email","placeholder","Ex:email@gmail.com",1,"form-control",3,"ngClass"],["for","phone",1,"mb-2","fw-bolder"],["id","phone","type","tel","formControlName","phone",1,"form-control",3,"ngClass"],["placeholder","01xxxxxxxxx",1,"alert","alert-warning","fs-6","my-3","rounded-2","fw-bold"],["type","submit",1,"btn","btn-main","d-block","mx-auto","text-white","col-6",3,"disabled"],[1,"text-danger","mt-3"],[1,"m-0"]],template:function(o,t){if(o&1&&(l(0,"section",0)(1,"form",1),y("ngSubmit",function(){return t.update()}),l(2,"div",2)(3,"label",3)(4,"span",4),a(5,"*"),i(),a(6,"Name: "),i(),F(7,"input",5),_(8,J,4,1,"div",6),i(),l(9,"div",2)(10,"label",7)(11,"span",4),a(12,"*"),i(),a(13,"Email: "),i(),F(14,"input",8),_(15,z,3,1,"div",6),i(),l(16,"div",2)(17,"label",9)(18,"span",4),a(19,"*"),i(),a(20,"Phone: "),i(),F(21,"input",10),_(22,Q,3,1,"div",11),i(),l(23,"button",12),a(24,"UpDate"),i(),l(25,"p",13),a(26,"* You must update email with any other data."),i()()()),o&2){let r,g,m,v,u,C;d(),h("formGroup",t.updateForm),d(6),h("ngClass",x(8,S,!((r=t.updateForm.get("name"))!=null&&r.errors)&&(((r=t.updateForm.get("name"))==null?null:r.touched)||((r=t.updateForm.get("name"))==null?null:r.dirty)),((r=t.updateForm.get("name"))==null?null:r.errors)&&(((r=t.updateForm.get("name"))==null?null:r.touched)||((r=t.updateForm.get("name"))==null?null:r.dirty)))),d(),f(8,(g=t.updateForm.get("name"))!=null&&g.errors&&((g=t.updateForm.get("name"))!=null&&g.touched)?8:-1),d(6),h("ngClass",x(11,S,!((m=t.updateForm.get("email"))!=null&&m.errors)&&(((m=t.updateForm.get("email"))==null?null:m.touched)||((m=t.updateForm.get("email"))==null?null:m.dirty)),((m=t.updateForm.get("email"))==null?null:m.errors)&&(((m=t.updateForm.get("email"))==null?null:m.touched)||((m=t.updateForm.get("email"))==null?null:m.dirty)))),d(),f(15,(v=t.updateForm.get("email"))!=null&&v.errors&&((v=t.updateForm.get("email"))!=null&&v.touched)?15:-1),d(6),h("ngClass",x(14,S,!((u=t.updateForm.get("phone"))!=null&&u.errors)&&(((u=t.updateForm.get("phone"))==null?null:u.touched)||((u=t.updateForm.get("phone"))==null?null:u.dirty)),((u=t.updateForm.get("phone"))==null?null:u.errors)&&(((u=t.updateForm.get("phone"))==null?null:u.touched)||((u=t.updateForm.get("phone"))==null?null:u.dirty)))),d(),f(22,(C=t.updateForm.get("phone"))!=null&&C.errors&&((C=t.updateForm.get("phone"))!=null&&C.touched)?22:-1),d(),h("disabled",t.updateForm.invalid)}},dependencies:[G,j,D,q,I,R,A,N]})}}return e})();export{oe as UpdateProfileComponent};
