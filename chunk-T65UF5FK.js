import{a as G}from"./chunk-SGH6XYLF.js";import{a as q}from"./chunk-AYSO5EUP.js";import"./chunk-NVT2GBP7.js";import{a as F,b as g,c as N,d as D,h as j,i as V,j as M,k as P,m as R}from"./chunk-VZPYMUVG.js";import"./chunk-UXZZGWPP.js";import{Q as w,ca as I}from"./chunk-WXBF3XXG.js";import{Y as T}from"./chunk-V5QCGGX7.js";import{Cb as o,Db as n,Eb as y,Ob as S,Pb as A,Tb as d,Wa as s,Xa as C,_b as x,bc as b,ga as k,ob as c,ub as m,yb as h}from"./chunk-7Q3RJGOY.js";var E=(t,u)=>({"is-valid":t,"is-invalid":u});function B(t,u){t&1&&(o(0,"p",15),d(1,"details is required"),n())}function O(t,u){t&1&&(o(0,"p",15),d(1,"Details length must be at least 20 "),n())}function L(t,u){if(t&1&&(o(0,"div",7),c(1,B,2,0,"p",15)(2,O,2,0),n()),t&2){let i,r=A();s(),h(1,(i=r.shippingAddress.get("details"))!=null&&i.getError("required")?1:(i=r.shippingAddress.get("details"))!=null&&i.getError("minlength")?2:-1)}}function H(t,u){t&1&&(o(0,"p",15),d(1,"phone is required"),n())}function $(t,u){t&1&&(o(0,"p",15),d(1,"phone number is not valid"),n())}function z(t,u){if(t&1&&(o(0,"div",7),c(1,H,2,0,"p",15)(2,$,2,0),n()),t&2){let i,r=A();s(),h(1,(i=r.shippingAddress.get("phone"))!=null&&i.getError("required")?1:(i=r.shippingAddress.get("phone"))!=null&&i.getError("pattern")?2:-1)}}function J(t,u){t&1&&(o(0,"p",15),d(1,"city is required"),n())}function K(t,u){t&1&&(o(0,"p",15),d(1,"Details length must be at least 3 "),n())}function Q(t,u){if(t&1&&(o(0,"div",7),c(1,J,2,0,"p",15)(2,K,2,0),n()),t&2){let i,r=A();s(),h(1,(i=r.shippingAddress.get("city"))!=null&&i.getError("required")?1:(i=r.shippingAddress.get("city"))!=null&&i.getError("minlength")?2:-1)}}var ie=(()=>{class t{constructor(i,r,e,l,_){this._formBuilder=i,this._activatedRoute=r,this._paymentService=e,this._cartService=l,this._router=_,this.shippingAddress=this._formBuilder.group({details:[null,[g.required,g.minLength(20)]],phone:[null,[g.required,g.pattern(/^01[0125][0-9]{8}$/)]],city:[null,[g.required,g.minLength(3)]]})}ngOnInit(){this._activatedRoute.paramMap.subscribe({next:i=>{this.cartId=i.get("id"),console.log(this.cartId)}})}payVisa(){this._paymentService.checkOutSession(this.cartId,this.shippingAddress.value).subscribe({next:i=>{console.log(i),window.open(i.session.url,"_self")}}),console.log(this.shippingAddress.value)}payCash(){this._paymentService.cashPayment(this.cartId,this.shippingAddress.value).subscribe({next:i=>{console.log(i),this._router.navigate(["/allorders"]),this._cartService.cartCounter.next(0)}})}static{this.\u0275fac=function(r){return new(r||t)(C(P),C(w),C(G),C(q),C(I))}}static{this.\u0275cmp=k({type:t,selectors:[["app-checkout"]],standalone:!0,features:[x],decls:25,vars:18,consts:[[1,"checkout","m-5","bg-light","rounded-2","p-3"],[1,"container"],[1,"text-main","fw-bolder","my-2"],[3,"formGroup"],[1,"my-3"],["for","details"],["name","","formControlName","details","id","details","placeholder","Cairo , Maadi",1,"form-control",3,"ngClass"],[1,"alert","alert-warning","fs-6","my-3","rounded-2","fw-bold"],["for","phone"],["id","phone","type","tel","formControlName","phone","placeholder","01xxxxxxxxx",1,"form-control",3,"ngClass"],["for","city"],["type","text","name","","formControlName","city","id","city","placeholder","Helwan",1,"form-control",3,"ngClass"],[1,"btns","d-flex","flex-wrap","justify-content-center","align-items-center"],[1,"btn","btn-outline-success","fw-bolder","px-4","col-12","col-md-4","me-1",3,"click","disabled"],[1,"btn","btn-outline-success","fw-bolder","px-4","col-12","col-md-4","mt-2","mt-md-0","ms-1",3,"click","disabled"],[1,"m-0"]],template:function(r,e){if(r&1&&(o(0,"section",0)(1,"div",1)(2,"h2",2),d(3,"CheckOut"),n(),o(4,"form",3)(5,"div",4)(6,"label",5),d(7,"Details"),n(),y(8,"textarea",6),c(9,L,3,1,"div",7),n(),o(10,"div",4)(11,"label",8),d(12,"Phone"),n(),y(13,"input",9),c(14,z,3,1,"div",7),n(),o(15,"div",4)(16,"label",10),d(17,"City"),n(),y(18,"input",11),c(19,Q,3,1,"div",7),n(),o(20,"div",12)(21,"button",13),S("click",function(){return e.payVisa()}),d(22,"Pay Visa"),n(),o(23,"button",14),S("click",function(){return e.payCash()}),d(24,"Pay Cash"),n()()()()()),r&2){let l,_,a,f,p,v;s(4),m("formGroup",e.shippingAddress),s(4),m("ngClass",b(9,E,!((l=e.shippingAddress.get("details"))!=null&&l.errors)&&(((l=e.shippingAddress.get("details"))==null?null:l.touched)||((l=e.shippingAddress.get("details"))==null?null:l.dirty)),((l=e.shippingAddress.get("details"))==null?null:l.errors)&&(((l=e.shippingAddress.get("details"))==null?null:l.touched)||((l=e.shippingAddress.get("details"))==null?null:l.dirty)))),s(),h(9,(_=e.shippingAddress.get("details"))!=null&&_.errors&&((_=e.shippingAddress.get("details"))!=null&&_.touched)?9:-1),s(4),m("ngClass",b(12,E,!((a=e.shippingAddress.get("phone"))!=null&&a.errors)&&(((a=e.shippingAddress.get("phone"))==null?null:a.touched)||((a=e.shippingAddress.get("phone"))==null?null:a.dirty)),((a=e.shippingAddress.get("phone"))==null?null:a.errors)&&(((a=e.shippingAddress.get("phone"))==null?null:a.touched)||((a=e.shippingAddress.get("phone"))==null?null:a.dirty)))),s(),h(14,(f=e.shippingAddress.get("phone"))!=null&&f.errors&&((f=e.shippingAddress.get("phone"))!=null&&f.touched)?14:-1),s(4),m("ngClass",b(15,E,!((p=e.shippingAddress.get("city"))!=null&&p.errors)&&(((p=e.shippingAddress.get("city"))==null?null:p.touched)||((p=e.shippingAddress.get("city"))==null?null:p.dirty)),((p=e.shippingAddress.get("city"))==null?null:p.errors)&&(((p=e.shippingAddress.get("city"))==null?null:p.touched)||((p=e.shippingAddress.get("city"))==null?null:p.dirty)))),s(),h(19,(v=e.shippingAddress.get("city"))!=null&&v.errors&&((v=e.shippingAddress.get("city"))!=null&&v.touched)?19:-1),s(2),m("disabled",e.shippingAddress.invalid),s(2),m("disabled",e.shippingAddress.invalid)}},dependencies:[R,j,F,N,D,V,M,T]})}}return t})();export{ie as CheckoutComponent};
