import{a as B}from"./chunk-4LR65QCZ.js";import{a as V}from"./chunk-AYSO5EUP.js";import{l as j}from"./chunk-WNAWHQLM.js";import"./chunk-NVT2GBP7.js";import"./chunk-UXZZGWPP.js";import{da as w}from"./chunk-WXBF3XXG.js";import{wa as F}from"./chunk-V5QCGGX7.js";import{Ab as E,Bb as O,Cb as r,Db as a,Eb as x,Hb as v,Ob as _,Pb as s,Sa as D,Tb as o,Ub as m,Wa as c,Xa as h,_b as P,ac as T,ec as S,ga as y,gc as g,ob as f,qa as u,qb as I,ra as p,rb as k,ub as C,yb as b}from"./chunk-7Q3RJGOY.js";var L=(e,l)=>l.product._id,$=()=>[w],M=e=>["/checkout",e];function Q(e,l){e&1&&x(0,"app-loader")}function G(e,l){e&1&&(r(0,"div",12)(1,"button",13),o(2,"Start Shopping"),a()())}function R(e,l){if(e&1){let t=v();r(0,"div",11)(1,"div",3)(2,"div",14),x(3,"img",15),r(4,"div",16)(5,"h6",17),o(6),a(),r(7,"p",18),o(8),S(9,"currency"),a(),r(10,"span",19),_("click",function(){let i=u(t).$implicit,d=s();return p(d.deleteItem(i.product._id))}),x(11,"i",20),o(12," Remove"),a()()(),r(13,"div",21)(14,"div",22)(15,"button",23),_("click",function(){let i=u(t).$implicit,d=s();return p(d.updateQuantity(i.product._id,i.count-1))}),o(16,"-"),a(),r(17,"span",24),o(18),a(),r(19,"button",25),_("click",function(){let i=u(t).$implicit,d=s();return p(d.updateQuantity(i.product._id,i.count+1))}),o(20,"+"),a()()()()()}if(e&2){let t=l.$implicit;c(3),C("src",t.product.imageCover,D)("alt",t.product.title),c(3),m(t.product.title),c(2),m(g(9,6,t.price,"GBP")),c(7),C("disabled",t.count==1),c(3),m(t.count)}}function U(e,l){if(e&1){let t=v();r(0,"div",26)(1,"button",27),_("click",function(){u(t);let i=s(2);return p(i.clearCart())}),o(2,"Clear cart"),a(),r(3,"button",28),o(4,"Check Out"),a()()}if(e&2){let t=s(2);c(3),C("routerLink",T(1,M,t.cartID))}}function z(e,l){if(e&1&&f(0,U,5,3,"div",26),e&2){let t=s();b(0,t.cartData.length>0?0:-1)}}var N=(()=>{class e{constructor(t,n){this._cartService=t,this._toastr=n}ngOnInit(){this.catSub=this._cartService.getLoggedUserCart().subscribe({next:t=>{console.log(t),this.cartData=t.data.products,this.cartID=t.cartId,console.log(this.cartID),this.totalCartPrice=t.data.totalCartPrice,this.noOfCartItems=t.numOfCartItems,console.log(this.cartData)},error:t=>{console.log(t)}})}deleteItem(t){this._cartService.removeItem(t).subscribe({next:n=>{console.log(n),n.status=="success"&&(this.cartData=n.data.products,this._cartService.cartCounter.next(n.numOfCartItems),this.noOfCartItems=n.numOfCartItems,this.totalCartPrice=n.data.totalCartPrice,console.log(this.totalCartPrice),this._toastr.warning("Removed Successfully","FreshCart",{closeButton:!0,timeOut:1e3}))}})}clearCart(){this._cartService.clearCart().subscribe({next:t=>{console.log(t),this._toastr.warning("Cleared Successfully","FreshCart",{closeButton:!0,timeOut:1e3}),this._cartService.cartCounter.next(0)},complete:()=>{this.cartData.splice(0,this.cartData.length),this.noOfCartItems=0,this.totalCartPrice=0}})}updateQuantity(t,n){this._cartService.updateQuantity(t,n).subscribe({next:i=>{console.log(i),this.totalCartPrice=i.data.totalCartPrice,this.cartData=i.data.products,this._toastr.success("Updated Successfully","FreshCart",{closeButton:!0,timeOut:1e3})}})}ngOnDestroy(){this.catSub.unsubscribe()}static{this.\u0275fac=function(n){return new(n||e)(h(V),h(j))}}static{this.\u0275cmp=y({type:e,selectors:[["app-cart"]],standalone:!0,features:[P],decls:26,vars:7,consts:[[1,"my-5"],[1,"container"],[1,"cart","bg-main-light","shadow","rounded-2","p-5"],[1,"d-flex","justify-content-between","flex-wrap","align-items-center"],[1,"col-12","col-md-6"],["routerLink","/allorders",1,"col-12","col-md-6","text-main","fw-bolder","cursor-pointer","mt-md-2"],[1,"items","d-flex","justify-content-between","flex-wrap","mt-4"],[1,"fw-bolder","sm-h6","col-12","col-md-6"],[1,"text-success"],[1,"fw-bolder","col-12","col-md-6"],[1,"row","mt-4"],[1,"item","col-12","border-bottom","border-2","p-3"],[1,"mt-5"],["routerLink","/products",1,"btn","btn-outline-success"],[1,"image","d-flex","col-12","col-md-10"],[1,"w-25","me-3",3,"src","alt"],[1,"data","d-flex","flex-column","justify-content-center"],[1,"fw-bolder"],[1,"text-success","fw-bolder"],[1,"text-danger","fw-bolder","cursor-pointer",3,"click"],[1,"fa-solid","fa-trash"],[1,"col-md-2"],[1,"d-flex","justify-content-center","mt-3","mt-md-0"],[1,"btn","btn-outline-success","fw-bolder","me-3",3,"click","disabled"],[1,"pt-1"],[1,"btn","btn-outline-success","fw-bolder","ms-3",3,"click"],[1,"d-flex","justify-content-between","flex-wrap","mt-4"],[1,"btn","btn-outline-success","col-12","col-md-4",3,"click"],[1,"btn","btn-outline-success","col-12","col-md-4","mt-2","mt-md-0",3,"routerLink"]],template:function(n,i){n&1&&(r(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),o(5,"My Cart"),a(),r(6,"h5",5),o(7,"Go to orders"),a()(),r(8,"div",6)(9,"h4",7),o(10,"Total Price: "),r(11,"span",8),o(12),S(13,"currency"),a()(),r(14,"h4",9),o(15,"Total no. of items : "),r(16,"span",8),o(17),a()()(),f(18,Q,1,0,"app-loader")(19,G,3,0),r(20,"div",10),E(21,R,21,9,"div",11,L),f(23,z,1,1),I(24,23,$),a()()()()),n&2&&(c(12),m(g(13,4,i.totalCartPrice,"GBP")),c(5),m(i.noOfCartItems),c(),b(18,i.cartData?i.cartData.length==0?19:-1:18),c(3),O(i.cartData),c(3),k(i.cartData))},dependencies:[w,F,B],styles:["@media (max-width:762px){h4[_ngcontent-%COMP%]{font-size:18px}}"]})}}return e})();export{N as CartComponent};
