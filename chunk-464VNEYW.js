import{a as G}from"./chunk-G3DN72O6.js";import{a as z}from"./chunk-4LR65QCZ.js";import{a as B}from"./chunk-6Q5472AU.js";import{a as W}from"./chunk-LWQYB3BX.js";import{l as U}from"./chunk-Y34T3SBL.js";import"./chunk-NVT2GBP7.js";import{l as M}from"./chunk-VZPYMUVG.js";import"./chunk-UXZZGWPP.js";import{W as b}from"./chunk-OSSHIEUV.js";import"./chunk-CNXF2SFB.js";import{Y as j}from"./chunk-V5QCGGX7.js";import{$b as F,Ab as S,Bb as w,Cb as i,Db as o,Eb as c,Hb as D,Ob as x,Pb as p,Sa as T,Tb as d,Ub as u,Vb as k,Wa as a,Xa as C,_b as O,ac as P,ga as I,ob as v,pb as A,qa as f,qb as V,ra as h,sb as $,ub as _,x as y,yb as g,zb as E}from"./chunk-7Q3RJGOY.js";var J=(e,s)=>s._id,q=()=>[b],N=e=>["/product-details/",e],H=e=>({"text-danger":e}),R=()=>[1,2,3,4,5],K=e=>({"d-none":e});function Q(e,s){e&1&&c(0,"app-loader")}function X(e,s){e&1&&(i(0,"span",17),c(1,"i",19),o())}function Y(e,s){e&1&&(i(0,"span",17),c(1,"i",20),o())}function Z(e,s){if(e&1){let t=D();i(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8),c(4,"img",9),o()(),i(5,"div",10)(6,"h2",11),d(7),o(),i(8,"h1",12),d(9),o(),i(10,"div")(11,"div",13)(12,"span"),d(13),o(),i(14,"span",14),x("click",function(){let n=f(t),l=n.$implicit,m=n.$index,L=p();return h(L.addToWishList(l._id,m))}),c(15,"i",15),o()(),i(16,"div",16),S(17,X,2,0,"span",17,E),v(19,Y,2,0,"span",17),i(20,"span"),d(21),o()()()(),i(22,"button",18),x("click",function(){let n=f(t).$implicit,l=p();return h(l.addToCart(n._id))}),d(23,"Add to cart +"),o()()()}if(e&2){let t=s.$implicit;a(2),_("routerLink",P(9,N,t._id)),a(2),_("src",t.imageCover,T)("alt",t.title),a(3),u(t.category.name),a(2),u(t.title.split(" ").splice(0,2).join(" ")),a(4),k("",t.price,"EGP"),a(),_("ngClass",P(11,H,t.isAdded)),a(3),w(F(13,R).slice(0,t.ratingsAverage)),a(2),g(19,t.ratingsAverage%1!==0?19:-1),a(2),u(t.ratingsAverage)}}function tt(e,s){e&1&&(i(0,"span",17),c(1,"i",19),o())}function et(e,s){e&1&&(i(0,"span",17),c(1,"i",20),o())}function it(e,s){if(e&1){let t=D();i(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8),c(4,"img",9),o()(),i(5,"div",10)(6,"h2",11),d(7),o(),i(8,"h1",12),d(9),o(),i(10,"div")(11,"div",13)(12,"span"),d(13),o(),i(14,"span",24),x("click",function(){let n=f(t),l=n.$implicit,m=n.$index,L=p(3);return h(L.addToWishList(l._id,m))}),c(15,"i",15),o()(),i(16,"div",16),S(17,tt,2,0,"span",17,E),v(19,et,2,0,"span",17),i(20,"span"),d(21),o()()()(),i(22,"button",18),x("click",function(){let n=f(t).$implicit,l=p(3);return h(l.addToCart(n._id))}),d(23,"Add to cart +"),o()()()}if(e&2){let t=s.$implicit;a(2),_("routerLink",P(8,N,t._id)),a(2),_("src",t.imageCover,T)("alt",t.title),a(3),u(t.category.name),a(2),u(t.title.split(" ").splice(0,2).join(" ")),a(4),k("",t.price,"EGP"),a(4),w(F(10,R).slice(0,t.ratingsAverage)),a(2),g(19,t.ratingsAverage%1!==0?19:-1),a(2),u(t.ratingsAverage)}}function nt(e,s){if(e&1&&S(0,it,24,11,"div",5,J),e&2){let t=p(2);w(t.productDataPage2)}}function rt(e,s){e&1&&(i(0,"h5",25),c(1,"i",26),o())}function ot(e,s){e&1&&(i(0,"p",27),d(1,"Click to get more Products"),o())}function at(e,s){if(e&1){let t=D();i(0,"div",21)(1,"span",22,0),x("click",function(){f(t);let n=p();return h(n.getSecondPageOfProduct())}),c(3,"i",23),o()(),v(4,nt,2,0)(5,rt,2,0)(6,ot,2,0),V(7,4,q,5,6,null,1,null,A),$(1)}if(e&2){let t=p();_("ngClass",P(1,K,t.isLoaded))}}var vt=(()=>{class e{constructor(t,r,n,l){this._productsService=t,this._cartService=r,this._wishListService=n,this._toaster=l,this.isLoaded=!1}ngOnInit(){y([this._productsService.getAllProducts(1),this._wishListService.displayWishList()]).subscribe({next:t=>{this.productData=t[0].data.slice(0,20),this.wishListData=t[1].data,this.productData.forEach(r=>{for(let n=0;n<this.wishListData.length;n++)r._id===this.wishListData[n]._id&&(r.isAdded=!0)}),console.log(this.productData,this.wishListData)}})}getSecondPageOfProduct(){this.isLoaded=!0,this._productsService.getAllProducts(2).subscribe({next:t=>{this.productDataPage2=t.data,console.log(t)}})}addToWishList(t,r){this._wishListService.addToWishList(t).subscribe({next:n=>{this.wishListData=n.data,this._wishListService.wishListCounter.next(n.data.length),console.log(this.wishListData),this.wishListData.filter(l=>{l===this.productData[r]._id&&(this.productData[r].isAdded=!this.productData[r].isAdded,this.productData[r].isAdded?this._toaster.success(n.message,"FreshCart",{closeButton:!0,timeOut:1e3}):this._wishListService.removeWishList(t).subscribe({next:m=>{console.log(m),this._toaster.warning(m.message,"FreshCart",{closeButton:!0,timeOut:1e3}),this._wishListService.wishListCounter.next(m.data.length)}}))})}})}addToCart(t){this._cartService.addToCart(t).subscribe({next:r=>{console.log(r),this._toaster.success(r.message,"FreshCart",{closeButton:!0,timeOut:1e3}),this._cartService.cartCounter.next(r.numOfCartItems)}})}static{this.\u0275fac=function(r){return new(r||e)(C(G),C(W),C(B),C(U))}}static{this.\u0275cmp=I({type:e,selectors:[["app-products"]],standalone:!0,features:[O],decls:7,vars:2,consts:[["products",""],[3e3,null],[1,"my-5"],[1,"container"],[1,"row","my-4"],[1,"col-sm-6","col-md-4","col-lg-3","col-xl-2","p-2"],[1,"product","rounded-2","p-2"],[1,"cursor-pointer",3,"routerLink"],[1,"product-img"],[1,"w-100","rounded-2",3,"src","alt"],[1,"product-caption"],[1,"fs-6","text-main"],[1,"fs-6","fw-bold"],[1,"d-flex","justify-content-between"],[1,"heart","fs-4","cursor-pointer",3,"click","ngClass"],[1,"fa-solid","fa-heart"],[1,"small"],[1,"rating-color"],[1,"btn-main","w-100","mt-1",3,"click"],[1,"fa-solid","fa-star"],[1,"fa-solid","fa-star-half-stroke"],[1,"mt-2",3,"ngClass"],[1,"arrow","cursor-pointer","rounded-circle","bg-warning","text-center","d-block","mx-auto",3,"click"],["aria-hidden","true",1,"fa","fa-chevron-down","fa-bounce"],[1,"heart","fs-4",3,"click"],[1,"fw-bolder","mt-3","text-center"],[1,"fa-solid","fa-spinner","fa-spin","fa-2xl"],[1,"mb-0","text-center","mt-2","fw-bolder","lead"]],template:function(r,n){r&1&&(i(0,"section",2)(1,"div",3),v(2,Q,1,0,"app-loader"),i(3,"div",4),S(4,Z,24,14,"div",5,J),v(6,at,9,3),o()()()),r&2&&(a(2),g(2,n.productData?-1:2),a(2),w(n.productData),a(2),g(6,n.productData?6:-1))},dependencies:[b,j,M,z],styles:[".arrow[_ngcontent-%COMP%]{width:40px;height:40px;line-height:40px}"]})}}return e})();export{vt as ProductsComponent};
